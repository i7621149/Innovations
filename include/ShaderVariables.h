#ifndef SHADERVARIABLES_H__
#define SHADERVARIABLES_H__

#include "ngl/Util.h"
#include "ngl/Mat4.h"
#include "ngl/Mat3.h"
#include "ngl/Singleton.h"

//----------------------------------------------------------------------------------------------------------------------
/// @file ShaderVariables.h
/// @brief inherits from ngl::Singleton and contains variables for use in the shader
/// @author Felix Marrington-Reeve
/// @version 0.1
/// @struct ShaderVariables
/// @brief This contains variables passed to the shader as uniforms, such as resolution, time, rendertime, frame number, mouse data and date
/// it also contains the current material id and transform matrix
/// its member variables are public for ease of use
//----------------------------------------------------------------------------------------------------------------------
struct ShaderVariables : public ngl::Singleton<ShaderVariables>
{
  friend class ngl::Singleton<ShaderVariables>;
public :
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief reset values in the shader
  /// @param[in] _hard whether to reset resolution, mouse and date
  //----------------------------------------------------------------------------------------------------------------------
  void reset(bool _hard=false);
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief load the variables to the shader program
  /// @param[in] _progID the id of the shader program to load to
  //----------------------------------------------------------------------------------------------------------------------
  void loadToShader(GLuint _progID);
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief print shader variables to std::cout for debuggin purposes
  //----------------------------------------------------------------------------------------------------------------------
  void printVariables();

  //----------------------------------------------------------------------------------------------------------------------
  /// @brief x and y are resolution, z is redundant but is there for compatibility with ShaderToy programs
  //----------------------------------------------------------------------------------------------------------------------
  ngl::Vec3 resolution;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief time in seconds
  //----------------------------------------------------------------------------------------------------------------------
  float globalTime;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief render time of last frame
  //----------------------------------------------------------------------------------------------------------------------
  float timeDelta;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief frame number
  //----------------------------------------------------------------------------------------------------------------------
  int frame;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief mouse position.
  /// x, y: current mouse position if mousedown (or last position of mousedown)
  /// z, w: initial position of mousedown (negated if mouse up)
  //----------------------------------------------------------------------------------------------------------------------
  ngl::Vec4 mouse;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief date in year, month, day and seconds since 00:00:00
  //----------------------------------------------------------------------------------------------------------------------
  ngl::Vec4 date;

  //----------------------------------------------------------------------------------------------------------------------
  /// @brief id of the current entity
  //----------------------------------------------------------------------------------------------------------------------
  int matID;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Model View matrix
  //----------------------------------------------------------------------------------------------------------------------
  ngl::Mat4 MV;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Model View Project matrix
  //----------------------------------------------------------------------------------------------------------------------
  ngl::Mat4 MVP;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief transform matrix for normals
  //----------------------------------------------------------------------------------------------------------------------
  ngl::Mat3 normalMatrix;
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief Model matrix
  //----------------------------------------------------------------------------------------------------------------------
  ngl::Mat4 M;

private :
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief default constructor
  //----------------------------------------------------------------------------------------------------------------------
  ShaderVariables();
  //----------------------------------------------------------------------------------------------------------------------
  /// @brief default deconstuctor
  //----------------------------------------------------------------------------------------------------------------------
  ~ShaderVariables() = default;
};

#endif
